<h1>GitHub</h1>
<button (click)="loadIssues()">Load Issues {{repo.state}}</button>
<div *ng-if="hasAuthToken()">
  Logged in as {{getUsername()}}
</div>
<div *ng-if="!hasAuthToken()">
  <a href (click)="setupAuthToken(); false">Log in with Github</a>
</div>

<h1>Mentions</h1>
  <gh-mentions org="angular" [days]="7"></gh-mentions>

<h1>Milestone</h1>
<table border=1 cellspacing=0>
  <tr>
    <th><a href="https://github.com/angular/angular/issues?q=is%3Aopen+is%3Aissue+no%3Aassignee" target="_blank">!Assigned</a></th>
    <th *ng-for="var assignee of milestoneAssignees.items">
      <a href="https://github.com/angular/angular/issues?q=is%3Aopen+assignee%3A{{assignee.login}}" target="_blank">
        <img width="60" height="60" [src]="assignee.avatar_url || ''" title="{{assignee.login}}">
      </a>
    </th>
  </tr>
  <tbody *ng-for="var milestoneGroup of milestones.items">
    <tr><td [col-span]="milestoneAssignees.items.length + 1"><h2>{{milestoneGroup.milestone.title}}</h2></td></tr>
    <tr>
      <td valign="top">
        <issue *ng-for="var issue of milestoneGroup.noAssignee.items" [issue]="issue" [compact]="true"></issue>
      </td>
      <td *ng-for="var assignee of milestoneAssignees.items" valign="top">
        <issue *ng-for="var issue of milestoneGroup.getIssues(assignee)" [issue]="issue" [compact]="true"></issue>
      </td>
    </tr>
  </tbody>
<table>

<h1>Hotlist</h1>
<table border=1 cellspacing=0>
  <tr>
    <th *ng-for="var hotlistGroup of hotlistIssues.items" valign="top">
      <a target="_blank" href='https://github.com/angular/angular/issues?q=is%3Aopen+is%3Aissue+label%3A%22hotlist%3A+{{hotlistGroup.name}}%22'>{{hotlistGroup.name}}</a>
    </th>
  </tr>
  <tr>
    <td *ng-for="var hotlistGroup of hotlistIssues.items" valign="top">
      <issue *ng-for="var issue of hotlistGroup.issues.items" [issue]="issue" [compact]="false"></issue>
    </td>
  </tr>
</table>

<h1>Backlog</h1>
<table border=1 cellspacing=0>
  <tr>
    <th></th>
    <th *ng-for="var componentGroup of backlogComponents.items" valign="top">
      <a target="_blank" href='https://github.com/angular/angular/issues?q=is%3Aopen+is%3Aissue+no%3Amilestone+label%3A%22comp%3A+{{componentGroup.name}}%22'>{{componentGroup.name}}</a>
    </th>
  </tr>
  <tr *ng-for="var priority of ['P0', 'P1', 'P2', 'P3', 'P4']" valign="top">
    <td>{{priority}}</td>
    <td *ng-for="var componentGroup of backlogComponents.items" valign="top">
      <issue *ng-for="var issue of componentGroup.issues[priority].items" [issue]="issue" [compact]="true"></issue>
    </td>
  </tr>
</table>

<h1>Triage</h1>
<table border=1 cellspacing=0>
  <tr>
    <th><h2>Issues: {{triageIssues.items.length}}</h2></th>
    <th><h2>PRs: {{prIssues.items.length}}</h2></th>
  </tr>
  <tr>
    <td valign="top" width="40%">
      <issue *ng-for="var issue of triageIssues.items" [issue]="issue"></issue>
    </td>
    <td valign="top" width="60%">
      <table>
          <tr>
            <th>PR#</th>
            <th>Description</th>
            <th>PR State</th>
            <th>PR Action</th>
            <th>Priority</th>
            <th>Customer</th>
            <th>Labels</th>
            <th>Assigned</th>
          </tr>
          <tr *ng-for="var issue of prIssues.items">
            <td><a target="_blank"  [href]="issue.html_url">#{{issue.number}}</a></td>
            <td><a target="_blank"  [href]="issue.html_url">{{issue.title}}</a></td>
            <td nowrap>{{issue.pr_state}}</td>
            <td nowrap>{{issue.pr_action}}</td>
            <td nowrap>{{issue.priority}}</td>
            <td nowrap>{{issue.cust}}</td>
            <td>{{issue.labels_other.join('; ')}}</td>
            <td><a href="{{issue.assignee?.login}}" target="_blank"><img width="15" height="15" [hidden]="!issue.assignee" [src]="issue.assignee?.avatar_url || ''"> {{issue.assignee?.login}}</a></td>
          </tr>
        </table>
    </td>
  </tr>
</table>
